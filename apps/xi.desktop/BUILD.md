# Инструкция по сборке и установке Xi Desktop

## Предварительные требования

1. Убедитесь, что у вас установлен Node.js (рекомендуется версия 18+)
2. Установите зависимости проекта:
   ```bash
   pnpm install
   ```

## Разработка (Development)

Для запуска приложения в режиме разработки:

```bash
pnpm dev
```

Это запустит:

- Vite dev server на порту 5173
- Electron приложение с hot-reload

## Сборка приложения

### 1. Сборка для macOS

```bash
cd apps/xi.desktop
pnpm build
```

После сборки вы найдете установочные файлы в папке `release/`:

- `Xi Desktop-1.0.0.dmg` - установщик для macOS
- `Xi Desktop-1.0.0-mac.zip` - архив с приложением

### 2. Установка на macOS

**Вариант 1: Через DMG файл**

1. Откройте `Xi Desktop-1.0.0.dmg`
2. Перетащите приложение в папку Applications
3. Запустите приложение из Applications

**Вариант 2: Через ZIP архив**

1. Распакуйте `Xi Desktop-1.0.0-mac.zip`
2. Переместите приложение в папку Applications
3. При первом запуске macOS может показать предупреждение о безопасности
4. Перейдите в Настройки → Безопасность и разрешите запуск приложения

### 3. Сборка для других платформ

**Windows:**

```bash
pnpm build
```

Создаст `Xi Desktop-1.0.0.exe` (portable версия)

**Linux:**

```bash
pnpm build
```

Создаст `Xi Desktop-1.0.0.AppImage` и `Xi Desktop-1.0.0.deb`

## Структура сборки

Процесс сборки включает:

1. Компиляция TypeScript main процесса → `dist/main/`
2. Сборка React приложения через Vite → `dist/renderer/`
3. Создание установочных файлов через electron-builder → `release/`

## Устранение проблем

### Ошибка при сборке

- Убедитесь, что все зависимости установлены: `pnpm install`
- Проверьте, что TypeScript компилируется без ошибок: `pnpm run build:main`

### Приложение не запускается после установки

- На macOS: проверьте настройки безопасности в Системных настройках
- Убедитесь, что все файлы собраны корректно в папке `dist/`

### Проблемы с путями

- Убедитесь, что структура папок соответствует ожидаемой
- Проверьте, что `dist/main/index.js` и `dist/renderer/index.html` существуют
